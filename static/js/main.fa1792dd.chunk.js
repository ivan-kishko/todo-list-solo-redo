(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{113:function(t,e,a){},114:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(10),o=a.n(c);a(89),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i,s,u=a(32),l=a(162),d=a(174),f=a(163),p=r.a.memo((function(t){var e=Object(n.useState)(""),a=Object(u.a)(e,2),c=a[0],o=a[1],i=Object(n.useState)(null),s=Object(u.a)(i,2),p=s[0],m=s[1],b=function(){""!==c.trim()?(t.addItem(c.trim()),o("")):m("Title required")};return r.a.createElement("div",null,r.a.createElement(d.a,{size:"small",error:!!p,value:c,onChange:function(t){o(t.currentTarget.value),m(null)},onBlur:function(){null!==p&&m(null)},onKeyPress:function(t){"Enter"===t.key&&b()},variant:"outlined",label:"Title",helperText:p,disabled:t.disabled}),r.a.createElement(l.a,{color:"primary",onClick:b,disabled:t.disabled},r.a.createElement(f.a,null)))})),m=a(169),b=a(165),E=a(172),v=a(170),O=a(173),T=a(167),j=a(115),L=a(178),k=a(168),y=a(171),h=a(14),S=a.n(h),g=a(21),I=a(49),w=a(7),x=a(73),D=a.n(x);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(i||(i={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.High=2]="High",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var C=D.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"d54d3622-f03b-45b2-9f0a-fa6f5f4405c5"}}),A=function(){return C.get("todo-lists")},N=function(t){return C.post("todo-lists",{title:t})},H=function(t){return C.delete("todo-lists/".concat(t))},K=function(t,e){return C.put("todo-lists/".concat(t),{title:e})},P=function(t){return C.get("todo-lists/".concat(t,"/tasks"))},_=function(t,e){return C.delete("todo-lists/".concat(t,"/tasks/").concat(e))},G=function(t,e){return C.post("todo-lists/".concat(t,"/tasks"),{title:e})},R=function(t,e,a){return C.put("todo-lists/".concat(t,"/tasks/").concat(e),a)},U={status:"idle",error:null},B=function(t){return{type:"APP/SET-STATUS",status:t}},F=function(t){return{type:"APP/SET-ERROR",error:t}},z=function(t,e){t.messages.length?e(F(t.messages[0])):e(F("unexpected error occurred")),e(B("failed"))},Y=function(t,e,a){t.messages.length?e(F(t.messages[0])):e(F("unexpected error occurred")),e(Q(a,"failed"))},q=function(t,e){e(F(t)),e(B("failed"))},J=function(t,e,a){e(F(t)),e(Q(a,"failed"))},M=[],W=function(t,e){return{type:"CHANGE-TODOLIST-FILTER",filter:t,todoListId:e}},$=function(t,e){return{type:"CHANGE-TODOLIST-TITLE",todoListId:t,newTitle:e}},Q=function(t,e){return{type:"CHANGE-TODOLIST-ENTITY-STATUS",todoId:t,todoListEntityStatus:e}},V=a(17),X=(a(113),a(54)),Z=a.n(X),tt=r.a.memo((function(t){var e=t.title,a=t.changeTitle,c=t.disabled,o=Object(n.useState)(!1),i=Object(u.a)(o,2),s=i[0],l=i[1],f=Object(n.useState)(e),p=Object(u.a)(f,2),m=p[0],b=p[1],E=Object(n.useState)(!1),v=Object(u.a)(E,2),O=v[0],T=v[1];return s?r.a.createElement(d.a,{className:"".concat(Z.a.inputField," ").concat(O?Z.a.error:""),autoFocus:!0,value:m,onBlur:function(){""!==m?(l(!1),a(m)):T(!0)},onKeyPress:function(t){""!==m?"Enter"===t.key&&(l(!1),a(m)):T(!0)},onChange:function(t){b(t.currentTarget.value),T(!1)},placeholder:O?"please enter title":"",variant:"outlined",size:"small",error:O}):r.a.createElement("span",{onDoubleClick:function(){c||(m!==e&&b(e),l(!0))}},e)})),et=a(164),at=a(36),nt={},rt=function(t,e){return{type:"SET-TASKS",tasks:t,todoListId:e}},ct=function(t,e){return{type:"DELETE-TASK",taskId:t,todoListId:e}},ot=function(t,e,a){return{type:"CHANGE-TASK-STATUS",taskId:t,todoListId:e,status:a}},it=function(t,e,a){return{type:"CHANGE-TASK-TITLE",todoListId:t,taskId:e,newTitle:a}},st=a(55),ut=a.n(st),lt=a(176),dt=r.a.memo((function(t){var e=t.id,a=t.title,c=t.status,o=t.todoListId,s=t.todoListEntityStatus,u=Object(V.b)(),d=Object(n.useCallback)((function(t){u(function(t,e,a){return function(){var n=Object(g.a)(S.a.mark((function n(r,c){var o,i,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r(Q(e,"loading")),!(o=c().tasks[e].find((function(e){return e.id===t})))){n.next=9;break}return i={title:a,description:o.description,status:o.status,priority:o.priority,startDate:o.startDate,deadline:o.deadline},n.next=7,R(e,t,i);case 7:0===(s=n.sent).data.resultCode?(r(it(e,t,a)),r(Q(e,"succeeded"))):Y(s.data,r,e);case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),J(n.t0.message,r,e);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(t,e){return n.apply(this,arguments)}}()}(e,o,t))}),[u,o,e]);return r.a.createElement("li",{key:e,className:"".concat(ut.a.liElement," ").concat(2===c?ut.a.isDoneClassName:"")},r.a.createElement(lt.a,{checked:2===c,onChange:function(t){u(function(t,e,a){return function(){var n=Object(g.a)(S.a.mark((function n(r,c){var o,i,s;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,r(Q(e,"loading")),!(o=c().tasks[e].find((function(e){return e.id===t})))){n.next=9;break}return i={title:o.title,description:o.description,status:a,priority:o.priority,startDate:o.startDate,deadline:o.deadline},n.next=7,R(e,t,i);case 7:0===(s=n.sent).data.resultCode?(r(ot(t,e,a)),r(Q(e,"succeeded"))):Y(s.data,r,e);case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),J(n.t0.message,r,e);case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(t,e){return n.apply(this,arguments)}}()}(e,o,t.currentTarget.checked?i.Completed:i.New))},color:"primary",disabled:s}),r.a.createElement(tt,{title:a,changeTitle:d,disabled:s}),r.a.createElement(l.a,{onClick:function(){u(function(t,e){return function(){var a=Object(g.a)(S.a.mark((function a(n){var r;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n(B("loading")),a.next=4,_(e,t);case 4:0===(r=a.sent).data.resultCode?(n(ct(t,e)),n(B("succeeded"))):z(r.data,n),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),q(a.t0.message,n);case 11:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(t){return a.apply(this,arguments)}}()}(e,o))},disabled:s},r.a.createElement(et.a,null)))})),ft=r.a.memo((function(t){var e=t.id,a=t.todoListTitle,c=t.filter,o=t.todoListEntityStatus,i=Object(V.b)();Object(n.useEffect)((function(){var t;i((t=e,function(){var e=Object(g.a)(S.a.mark((function e(a){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(B("loading")),e.next=4,P(t);case 4:n=e.sent,a(rt(n.data.items,t)),a(B("succeeded")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),q(e.t0.message,a);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()))}),[i,e]);var s=Object(V.c)((function(t){switch(c){case"active":return t.tasks[e].filter((function(t){return 0===t.status}));case"completed":return t.tasks[e].filter((function(t){return 2===t.status}));default:return t.tasks[e]}})).map((function(t){return r.a.createElement(dt,{key:t.id+e,id:t.id,status:t.status,title:t.title,todoListId:e,todoListEntityStatus:"loading"===o})})),u=Object(n.useCallback)((function(t){var a,n;i((a=e,n=t,function(){var t=Object(g.a)(S.a.mark((function t(e){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(Q(a,"loading")),t.next=4,K(a,n);case 4:0===(r=t.sent).data.resultCode?(e($(a,n)),e(Q(a,"succeeded"))):Y(r.data,e,a),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),J(t.t0.message,e,a);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()))}),[i,e]),d="all"===c?"contained":void 0,f="active"===c?"contained":void 0,m="completed"===c?"contained":void 0;return r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(tt,{title:a,changeTitle:u,disabled:"loading"===o}),r.a.createElement(l.a,{onClick:function(){i(function(t){return function(){var e=Object(g.a)(S.a.mark((function e(a){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(B("loading")),e.next=4,H(t);case 4:0===(n=e.sent).data.resultCode?(a({type:"DELETE-TODOLIST",todoListId:t}),a(B("succeeded"))):z(n.data,a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),q(e.t0.message,a);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}(e))},disabled:"loading"===o},r.a.createElement(et.a,null))),r.a.createElement(p,{addItem:function(t){var a,n;i((a=t,n=e,function(){var t=Object(g.a)(S.a.mark((function t(e){var r;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(B("loading")),t.next=4,G(n,a);case 4:0===(r=t.sent).data.resultCode?(e({type:"ADD-TASK",task:r.data.data.item}),e(B("succeeded"))):z(r.data,e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),q(t.t0.message,e);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()))},disabled:"loading"===o}),r.a.createElement("div",null,s),r.a.createElement("div",null,r.a.createElement(b.a,{color:"primary",variant:d,style:{marginTop:"3px"},onClick:function(){i(W("all",e))}},"All"),r.a.createElement(b.a,{color:"primary",variant:f,style:{marginTop:"3px"},onClick:function(){i(W("active",e))}},"Active"),r.a.createElement(b.a,{color:"primary",variant:m,style:{marginTop:"3px"},onClick:function(){i(W("completed",e))}},"Completed")))})),pt=a(177),mt=a(175);function bt(t){return r.a.createElement(mt.a,Object.assign({elevation:6,variant:"filled"},t))}function Et(){var t=Object(V.c)((function(t){return t.app.error})),e=Object(V.b)(),a=function(t,a){"clickaway"!==a&&e(F(null))};return r.a.createElement(pt.a,{open:null!==t,autoHideDuration:6e3,onClose:a},r.a.createElement(bt,{onClose:a,severity:"error"},t))}var vt=a(166),Ot=Object(vt.a)((function(t){return{backdrop:{zIndex:t.zIndex.drawer+1,color:"#fff"}}})),Tt=r.a.memo((function(){var t=Ot(),e=Object(V.b)(),a=Object(V.c)((function(t){return t.todoLists})),c=Object(V.c)((function(t){return t.app.status}));Object(n.useEffect)((function(){e(function(){var t=Object(g.a)(S.a.mark((function t(e){var a;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(B("loading")),t.next=4,A();case 4:a=t.sent,e({type:"SET-TODO-LISTS",todoLists:a.data}),e(B("succeeded")),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),q(t.t0.message,e);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}())}),[e]);var o=Object(n.useCallback)((function(t){var a;e((a=t,function(){var t=Object(g.a)(S.a.mark((function t(e){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e(B("loading")),t.next=4,N(a);case 4:0===(n=t.sent).data.resultCode?(e({type:"ADD-TODOLIST",todoList:n.data.data.item}),e(B("succeeded"))):z(n.data,e),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),q(t.t0.message,e);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()))}),[e]),i=a.map((function(t){return r.a.createElement(T.a,{key:t.id,item:!0,style:{wordBreak:"break-word"}},r.a.createElement(j.a,{style:{padding:"10px"}},r.a.createElement(ft,{id:t.id,todoListTitle:t.title,filter:t.filter,todoListEntityStatus:t.todoListEntityStatus})))}));return r.a.createElement("div",{className:"App"},r.a.createElement(Et,null),r.a.createElement(L.a,{open:"loading"===c,className:t.backdrop},r.a.createElement(k.a,{color:"primary",size:70})),r.a.createElement(m.a,{position:"static"},r.a.createElement(v.a,{style:{justifyContent:"space-between"}},r.a.createElement(l.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(y.a,null)),r.a.createElement(E.a,{variant:"h6"},"TodoList"),r.a.createElement(b.a,{color:"inherit"},"Login"))),r.a.createElement(O.a,{fixed:!0},r.a.createElement(T.a,{container:!0,style:{padding:"20px",justifyContent:"center"}},r.a.createElement(p,{addItem:o})),r.a.createElement(T.a,{container:!0,spacing:3,style:{justifyContent:"center"}},i)))})),jt=a(50),Lt=a(74),kt=Object(jt.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TODO-LISTS":var a=Object(w.a)({},t);return e.todoLists.forEach((function(t){return a[t.id]=[]})),a;case"ADD-TODOLIST":var n=Object(w.a)({},t);return n[e.todoList.id]=[],n;case"DELETE-TODOLIST":var r=Object(w.a)({},t);return delete r[e.todoListId],console.log(r),r;case"SET-TASKS":var c=Object(w.a)({},t);return c[e.todoListId]=e.tasks,c;case"ADD-TASK":var o=Object(w.a)({},t),i=o[e.task.todoListId];return o[e.task.todoListId]=[e.task].concat(Object(I.a)(i)),o;case"DELETE-TASK":return Object(w.a)(Object(w.a)({},t),{},Object(at.a)({},e.todoListId,t[e.todoListId].filter((function(t){return t.id!==e.taskId}))));case"CHANGE-TASK-STATUS":return Object(w.a)(Object(w.a)({},t),{},Object(at.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.taskId?Object(w.a)(Object(w.a)({},t),{},{status:e.status}):t}))));case"CHANGE-TASK-TITLE":return Object(w.a)(Object(w.a)({},t),{},Object(at.a)({},e.todoListId,t[e.todoListId].map((function(t){return t.id===e.taskId?Object(w.a)(Object(w.a)({},t),{},{title:e.newTitle}):t}))));default:return t}},todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET-TODO-LISTS":return e.todoLists.map((function(t){return Object(w.a)(Object(w.a)({},t),{},{filter:"all",todoListEntityStatus:"idle"})}));case"ADD-TODOLIST":var a=Object(w.a)(Object(w.a)({},e.todoList),{},{filter:"all",todoListEntityStatus:"idle"});return[a].concat(Object(I.a)(t));case"DELETE-TODOLIST":return t.filter((function(t){return t.id!==e.todoListId}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todoListId?Object(w.a)(Object(w.a)({},t),{},{filter:e.filter}):t}));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todoListId?Object(w.a)(Object(w.a)({},t),{},{title:e.newTitle}):t}));case"CHANGE-TODOLIST-ENTITY-STATUS":return t.map((function(t){return t.id===e.todoId?Object(w.a)(Object(w.a)({},t),{},{todoListEntityStatus:e.todoListEntityStatus}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(w.a)(Object(w.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(w.a)(Object(w.a)({},t),{},{error:e.error});default:return t}}}),yt=Object(jt.c)(kt,Object(jt.a)(Lt.a));window.store=yt,o.a.render(r.a.createElement(V.a,{store:yt},r.a.createElement(Tt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},54:function(t,e,a){t.exports={inputField:"EditableSpan_inputField__3qIHy",error:"EditableSpan_error__26IDH"}},55:function(t,e,a){t.exports={isDone:"Task_isDone__1B-ow",liElement:"Task_liElement__2oSik"}},84:function(t,e,a){t.exports=a(114)},89:function(t,e,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.fa1792dd.chunk.js.map